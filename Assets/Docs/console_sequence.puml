@startuml
title DeepNeurosis - Flux d'extraction et transitions d'étages

actor Player
participant Elevator
participant FloorManager as FM
participant BaseGenerator as BG
participant "ExtractionConsole" as Console
participant "ExtractionPodActivator" as Pod
participant "File IO" as Save

== Démarrage ==
Player -> Elevator : Choisit un étage de jeu
Elevator -> FM : GoToFloor(n)
FM -> BG : GenerateFloor / LoadFloorFromData

== Gameplay ==
Player -> Console : Insère NavModule
Player -> Console : Insère SecurityModule
Player -> Console : Tourne RotarySelector (Priority/Protocol/Destination)
Player -> Console : Appuie sur ValidateButton
Console -> Console : Validate() [vérifie modules + séquence]
Console -> Save : Écrit consoleState dans FloorSaveData
Console -> Player : Diode verte si correct

== Accès Extraction ==
Player -> Elevator : Choisit l'étage 2
Elevator -> FM : GoToFloor(2)
FM -> Pod : ApplyInteractionLayerIfConsoleValidated(true) + PlayExtractionMusic()
Player -> Pod : Interagit pour terminer

== Persistance ==
FM -> Save : startRoom.json (StartRoom)
FM -> Save : floor_<index>.json (Étages)

@enduml